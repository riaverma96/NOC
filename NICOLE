<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>TomTom JavaScript SDK - Map</title>
        <link rel="stylesheet" type="text/css" href="../css/tomtom.map.min.css" />
        <!--[if lte IE 8]><link rel="stylesheet" href="../css/tomtom.map.ie.min.css" /><![endif]-->
        <script type="text/javascript" src="../js/leaflet.js"></script>
        <script type="text/javascript" src="../js/tomtom.map.js"></script>
        <script type="text/javascript" src="apikey.js"></script>
        <script>        
            window.onload = function() {
                
                // set the base image path used by tomtom.Marker
                tomtom.setImagePath("../images/");
                
                // modify the default marker options to use a custom image
                tomtom.Marker.DEFAULT_MARKER_OPTIONS = {
                    iconUrl: "atmblack.png", 
                    iconSize: [32, 37],
                    iconAnchor: [ 17, 34 ]
                };
                
                // create the map
                var map = new tomtom.Map({
                    domNode: "map",
                    cookie: false,
                    scale: true,
                    center: [33.7550,-84.3900],
                    zoom: 12
                });
                
                // add some markers
                map.addLayer(new tomtom.Marker([33.762, -84.000]));
                map.addLayer(new tomtom.Marker([39.73845, -104.98485]));
                map.addLayer(new tomtom.Marker([34.05224, -118.24334]));
                map.addLayer(new tomtom.Marker([37.78008, -122.42017]));
                
            };
        </script>

        <script>
            /*var data;
            var service = new tomtom.services.GeocodingService("3czvjrwupf7bz7n24n7cpdkd");
            service.geocode("https://api.tomtom.com/lbs/services/geocode/4/geocode?PC=30332&FN=hotel%2Fmotel&key=3czvjrwupf7bz7n24n7cpdkd", function(response) { data = response; });
            var parsedata = $.parseXML(data);
            console.log($(parsedata).find("latitude"));
            console.log($(parsedata).find("longitude"));

            var latitude = $(parsedata).find("latitude");
            var longitude = $(parsedata).find("longitude");

            for (var i = 1; i < latitude.length; i++) {
               map.addLayer(new tomtom.Marker([latitude[i], longitude[i]]));
            }*/
        function setPoints(longitude, latitude) {
            // Request the JSON and process it
            $.ajax({
                type:'GET',
                url:"https://api.tomtom.com/lbs/services/geocode/4/geocode?PC=30332&FN=hotel%2Fmotel&key=3czvjrwupf7bz7n24n7cpdkd",
                data:"longitude="+longitude+"latitude="+latitude+"format=json&jsoncallback=?",
                success:function(longitude, latitude) {
                    // Create an empty array to store????????
                    var latitudes = [];
                    var longitudes = [];

                    // Loop through the items
                    for(var i = 0; i < 6; i++) 
                    {
                        // create map points
                        map.addLayer(new tomtom.Marker([latitudes[i], longitudes[i]]));
                    }
                },
                dataType:'jsonp'
            });
        }
        </script>


        <style type="text/css">
            html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
        </style>
    </head>
    <body>
        <div style="width: 100%; height: 100%;" id="map"></div>
    </body>
</html>
